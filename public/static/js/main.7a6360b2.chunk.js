(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{24:function(e,t,n){},43:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(19),l=n.n(c),s=(n(24),n(2)),o=n(5),i=n(4),u=n(6),d=n.n(u),p="";function f(){return b.apply(this,arguments)}function b(){return(b=Object(o.a)(Object(s.a)().mark((function e(){var t;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get("".concat(p,"/authorize"));case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",{success:!1});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function j(){return j=Object(o.a)(Object(s.a)().mark((function e(){var t,n,r=arguments;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",e.prev=1,e.next=4,d.a.get("".concat(p,"/token?code=").concat(t));case 4:return n=e.sent,e.abrupt("return",n.data);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",{success:!1});case 12:case"end":return e.stop()}}),e,null,[[1,8]])}))),j.apply(this,arguments)}function m(e,t,n){return h.apply(this,arguments)}function h(){return(h=Object(o.a)(Object(s.a)().mark((function e(t,n,r){var a;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.post("".concat(p,"/upload"),{filename:n,url:t,tokens:r});case 3:return a=e.sent,e.abrupt("return",a.data);case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",{success:!1});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function O(){return(O=Object(o.a)(Object(s.a)().mark((function e(t){var n;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get("".concat(p,"/progress?fileId=").concat(t));case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{success:!1});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}n(43);var g,v,w=["title","titleId"];function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x.apply(this,arguments)}function y(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function S(e,t){var n=e.title,a=e.titleId,c=y(e,w);return r.createElement("svg",x({width:30,height:30,viewBox:"0 0 256 229",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,g||(g=r.createElement("g",{clipPath:"url(#clip0_1161_252)"},r.createElement("path",{d:"M19.354 196.034L30.644 215.534C32.99 219.64 36.362 222.866 40.321 225.212C51.661 210.818 59.553 199.772 64.001 192.075C68.514 184.264 74.061 172.045 80.642 155.42C62.906 153.085 49.466 151.918 40.322 151.918C31.545 151.918 18.105 153.085 0 155.42C0 159.965 1.173 164.51 3.519 168.616L19.354 196.034V196.034Z",fill:"#0066DA"}),r.createElement("path",{d:"M215.681 225.212C219.641 222.866 223.013 219.64 225.358 215.535L230.05 207.471L252.484 168.616C254.786 164.599 255.999 160.05 256.002 155.42C237.792 153.085 224.377 151.918 215.755 151.918C206.489 151.918 193.073 153.085 175.507 155.42C182.01 172.136 187.484 184.355 191.929 192.075C196.412 199.864 204.329 210.909 215.681 225.212V225.212Z",fill:"#EA4335"}),r.createElement("path",{d:"M128.001 73.311C141.121 57.466 150.163 45.247 155.126 36.656C159.123 29.738 163.522 18.692 168.322 3.519C164.363 1.173 159.818 0 155.126 0H100.876C96.1842 0 91.6402 1.32 87.6802 3.519C93.7862 20.921 98.9682 33.306 103.224 40.673C107.928 48.815 116.187 59.694 128.001 73.311Z",fill:"#00832D"}),r.createElement("path",{d:"M175.36 155.42H80.6418L40.3218 225.212C44.2798 227.558 48.8248 228.731 53.5168 228.731H202.485C207.177 228.731 211.723 227.411 215.681 225.211L175.361 155.42H175.36Z",fill:"#2684FC"}),r.createElement("path",{d:"M128.001 73.3105L87.681 3.51953C83.721 5.86553 80.349 9.09053 78.003 13.1965L3.519 142.224C1.21613 146.24 0.00304247 150.789 0 155.42H80.642L128.002 73.3105H128.001Z",fill:"#00AC47"}),r.createElement("path",{d:"M215.242 77.7096L177.999 13.1956C175.654 9.08955 172.281 5.86455 168.322 3.51855L128.002 73.3106L175.36 155.42H255.856C255.856 150.874 254.683 146.33 252.337 142.224L215.242 77.7096Z",fill:"#FFBA00"}))),v||(v=r.createElement("defs",null,r.createElement("clipPath",{id:"clip0_1161_252"},r.createElement("rect",{width:256,height:229,fill:"white"})))))}var C=r.forwardRef(S),I=(n.p,n(1));var N=function(e){var t=e.isAuth,n=e.isBtnLoading,a=e.handleAuthClick;return Object(I.jsxs)(r.Fragment,{children:[Object(I.jsxs)("div",{className:"input-field",children:[Object(I.jsx)("label",{htmlFor:"url",children:" File URL "}),Object(I.jsx)("input",{required:!0,id:"url",placeholder:"eg: https://example.com/my-file.mp4",name:"url",onChange:function(e){var t=e.target.value;window.localStorage.setItem("fileurl",t)}})]}),Object(I.jsxs)("div",{className:"input-field",children:[Object(I.jsxs)("label",{htmlFor:"fname",children:[" ","File name \xa0 ",Object(I.jsx)("small",{children:" ( optional ) "})," "]}),Object(I.jsx)("input",{id:"fname",placeholder:"eg: my file",name:"fname"})]}),Object(I.jsx)("div",{className:"initial-message",children:t?Object(I.jsxs)("button",{disabled:n,className:"primary-btn success",children:[Object(I.jsx)(C,{}),"Upload to Google Drive"]}):Object(I.jsxs)(r.Fragment,{children:[Object(I.jsxs)("button",{disabled:n,onClick:a,className:"primary-btn",type:"button",children:[Object(I.jsx)(C,{}),"Authorize Google Drive"]}),Object(I.jsx)("p",{children:"You need authorize this app to upload file to google drive from your url"})]})})]})},k=n(10);n(45);var L=function(e){var t=e.fileId,n=e.setFileId,a=void 0===n?function(){}:n,c=Object(r.useState)(0),l=Object(i.a)(c,2),s=l[0],o=l[1],u=Object(r.useState)(t),d=Object(i.a)(u,2),p=d[0],f=(d[1],Object(r.useState)("MyFileNew.mp4")),b=Object(i.a)(f,2),j=b[0],m=b[1];return Object(r.useEffect)((function(){var e=setInterval((function(){(function(e){return O.apply(this,arguments)})(p).then((function(e){if(!e.success)return a(null),void window.localStorage.removeItem("uploadData");o(e.progress),100!==e.progress&&null!==e.progress||window.localStorage.removeItem("uploadData")}))}),2e3),n=JSON.parse(window.localStorage.getItem("uploadData")||"null");if(a(null===n||void 0===n?void 0:n.fileId),m(null===n||void 0===n?void 0:n.filename),!n||t)return function(){return clearInterval(e)}}),[p]),Object(I.jsxs)("div",{className:"progress-view",children:[Object(I.jsx)(k.a,{styles:Object(k.b)({pathColor:"#3587d9",textColor:"#3587d9",trailColor:"#23212f"}),value:s,text:"".concat(s,"%")}),100!==s?Object(I.jsxs)("div",{className:"progress-label",children:["File ",Object(I.jsxs)("span",{className:"filename",children:[" ",j," "]})," is Uploading to google drive..."]}):Object(I.jsxs)("div",{className:"progress-label success",children:["File ",Object(I.jsxs)("span",{className:"filename",children:[" ",j," "]})," is uploaded successfully!",Object(I.jsx)("button",{type:"button",className:"primary-btn",onClick:function(){return a(null)},children:"Upload New File"})]})]})};var E=function(){var e=Object(r.useState)(!1),t=Object(i.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(!1),l=Object(i.a)(c,2),u=l[0],d=l[1],p=Object(r.useState)({}),b=Object(i.a)(p,2),h=b[0],O=b[1],g=Object(r.useState)(!1),v=Object(i.a)(g,2),w=v[0],x=v[1],y=JSON.parse(window.localStorage.getItem("uploadData")||"{}"),S=Object(r.useState)(y.fileId),C=Object(i.a)(S,2),k=C[0],E=C[1];function F(){return(F=Object(o.a)(Object(s.a)().mark((function e(){var t;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.next=3,f();case 3:(t=e.sent).success&&(window.location.href=t.authUrl),a(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return(D=Object(o.a)(Object(s.a)().mark((function e(t){var n,r,c,l,o,i;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a(!0),n=t.target.fname.value,r=t.target.url.value||"",c=JSON.parse(window.localStorage.getItem("tokens")||"null")){e.next=9;break}return d(!1),O(null),e.abrupt("return");case 9:return e.next=11,m(r,n,c);case 11:(l=e.sent).success?(o=r.split("/"),i=decodeURI(o[o.length-1].split(".")[0]),window.localStorage.setItem("uploadData",JSON.stringify({fileId:l.fileId,filename:n||i})),E(l.fileId),window.localStorage.removeItem("fileurl")):l.message&&alert(l.message),a(!1);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){var e=JSON.parse(window.localStorage.getItem("tokens")||"null"),t=new URL(window.location.href),n=t.searchParams.get("url"),r=document.getElementById("url");if(n?window.localStorage.setItem("fileurl",n):n=window.localStorage.getItem("fileurl"),n&&r&&(r.value=n),e&&new Date(e.expiry_date)>new Date){d(!0);var a=JSON.parse(window.localStorage.getItem("user")||"null");a&&O(a)}else{window.localStorage.removeItem("tokens"),window.localStorage.removeItem("user");var c=t.searchParams.get("code");c&&function(){return j.apply(this,arguments)}(c).then((function(e){e.success&&(window.localStorage.setItem("tokens",JSON.stringify(e.tokens)),window.localStorage.setItem("user",JSON.stringify(e.user)),O(e.user),d(!0))}))}}),[]),Object(I.jsxs)("form",{className:"App",onSubmit:function(e){return D.apply(this,arguments)},children:[u&&Object(I.jsxs)("div",{className:"account-info",onMouseEnter:function(){return x(!0)},onMouseLeave:function(){return x(!1)},children:["Logged in as",Object(I.jsxs)("div",{className:"user-chip",children:[Object(I.jsx)("img",{src:h.picture,alt:""}),h.name,Object(I.jsx)("div",{className:"dropdown",style:{display:w?"unset":"none"},children:Object(I.jsx)("div",{onClick:function(){d(!1),window.localStorage.removeItem("tokens"),window.localStorage.removeItem("user"),window.localStorage.removeItem("uploadData"),O(null)},className:"logout",children:"Logout"})})]})]}),k?Object(I.jsx)(L,{fileId:k,setFileId:E}):Object(I.jsx)(N,{isAuth:u,handleAuthClick:function(){return F.apply(this,arguments)},isBtnLoading:n})]})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,47)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,l=t.getTTFB;n(e),r(e),a(e),c(e),l(e)}))};l.a.render(Object(I.jsx)(a.a.StrictMode,{children:Object(I.jsx)(E,{})}),document.getElementById("root")),F()}},[[46,1,2]]]);
//# sourceMappingURL=main.7a6360b2.chunk.js.map